# ------------------------------------------------------------------------------
# MACHINE TEMPLATES

.on_ruby:
  tags:
    - shell
    - ruby
  variables:
    HOSTNAME: "ruby"
    ARCH: "toss_3_x86_64_ib"
    LLNL_SERVICE_USER: sphapp
  rules:
    - if: '$CI_COMMIT_BRANCH =~ /_qnone/ || $ON_RUBY == "OFF"' #run except if ...
      when: never
    - if: '$CI_JOB_NAME =~ /release_resources/'
      when: always
    - when: on_success

.on_lassen:
  tags:
    - shell
    - lassen
  variables:
    HOSTNAME: "lassen"
    ARCH: "blueos_3_ppc64le_ib_p9"
    LLNL_SERVICE_USER: sphapp
    DISPLAY: ":0.0"
  rules:
    - if: '$CI_COMMIT_BRANCH =~ /_qnone/ || $ON_LASSEN == "OFF"' #run except if ...
      when: never
    - if: '$CI_JOB_NAME =~ /release_resources/'
      when: always
    - when: on_success


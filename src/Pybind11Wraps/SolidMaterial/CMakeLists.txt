set(PYB11_MODULE_NAME SolidMaterial)
include(UsePYB11Generator)
PYB11_GENERATE_BINDINGS()

set(MODULE_INCLUDES
  ${PROJECT_SOURCE_DIR}/src/${PYB11_MODULE_NAME}
  ${PROJECT_SOURCE_DIR}/src
  ${PYBIND11_INCLUDE_DIRS}
  ${EIGEN_INCLUDE_DIRS}
  ${POLYTOPE_INCLUDE_DIRS}
  ${BLT_MPI_INCLUDES}
  )

set(MODULE_NAME Spheral${PYB11_MODULE_NAME})
set(GENERATED_SOURCE Spheral${PYB11_GENERATED_SOURCE})
set(ADDITIONAL_SOURCES )
set(ADDITIONAL_DEPENDS )

blt_add_library(
  NAME         ${MODULE_NAME}
  SOURCES      ${GENERATED_SOURCE} ${ADDITIONAL_SOURCES}
  DEPENDS_ON   ${SPHERAL_PYTHON_DEPENDS} ${ADDITIONAL_DEPENDS}
  INCLUDES     ${MODULE_INCLUDES}
  OUTPUT_NAME  ${MODULE_NAME}
  CLEAR_PREFIX TRUE
  SHARED       TRUE
  )

install(
  FILES ${CMAKE_BINARY_DIR}/lib/$<TARGET_FILE_NAME:${MODULE_NAME}>
  DESTINATION .
  )
